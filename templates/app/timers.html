{% extends 'app/base.html' %}
{% load bootstrap5 %}


{% block content %}
{% load static %}
<script type="text/javascript">
var countdown;
var countdown_number;
var audio = new Audio('{% static 'audio/backflow.mp3' %}');

function countdown_trigger() {
    if (countdown_number > 0) {
        countdown_number--;
        document.getElementById('countdown_text').innerHTML = countdown_number;
        if (countdown_number > 0) {
            countdown = setTimeout(countdown_trigger, 1000);
        }

        if (countdown_number === 5) {
            audio.play()
        }
    }
}

function countdown_clear() {
    clearTimeout(countdown);
    document.getElementById('countdown_text').innerHTML = "";
}

function countdown_init_backflow() {
    countdown_number = 10;
    countdown_trigger();
}

function countdown_init_reflect() {
    countdown_number = 11;
    countdown_trigger();
}
</script>

<div class="container text-center">

    <h3>Timers</h3>
      <br/>

    <div class="row">
        <div class="col">
            <br/>
            <h4>Backflow</h4>
            <h1 id="countdown_text"></h1>
            <button onclick="countdown_init_backflow()" class="btn btn-success">Start</button>
            <button onclick="countdown_clear()" class="btn btn-danger">Stop</button>
            <input type="hidden" id="audio-src" value="{% static 'audio/backflow.mp3' %}">
        </div>
        <div class="col">
            <br/>
            <h4>Reflect</h4>
            <h1>00:00:00</h1>
            <button onclick="countdown_init_reflect()" class="btn btn-success">Start</button>
            <button onclick="countdown_clear()" class="btn btn-danger">Stop</button>
            <br/>
            <br/>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <br/>
            <h4>Fire</h4>
            <h1>00:00:00</h1>
            <button type="submit" name="calculate" class="btn btn-success">Start</button>
            <button type="submit" name="calculate" class="btn btn-danger">Stop</button>
            <br/>
            <br/>
        </div>
        <div class="col">
            <br/>
            <h4>Lightning</h4>
            <h1>00:00:00</h1>
            <button type="submit" name="calculate" class="btn btn-success">Start</button>
            <button type="submit" name="calculate" class="btn btn-danger">Stop</button>
            <br/>
            <br/>
        </div>
    </div>

    <audio hidden>
        <p>An invisible audio player:</p>
        
        <source src="{% static 'audio/backflow.mp3' %}" type="audio/mpeg" id="backflow">
    </audio>

</div>
{% endblock %}

